b2は、b1のwaitがちゃんと動いていればあまり苦労はしませんでした。
initial_countの値をかなり大きくしないとうまくいかないところだけ、つまづきました。